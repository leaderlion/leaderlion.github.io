获取栏目的子栏目
{pc:content action="category" catid="$parentid" num="25" siteid="$siteid" order="listorder ASC"}      
  {loop $data $v}
     {$v[catname]}
  {/loop}
{/pc}

栏目列表调用
{pc:content action="lists" catid="10" num="3" order="listorder ASC limit 0,3--" moreinfo="1"}
  {loop $data $v}
     {$v[title]}
     {date('Y-m-d',$v[inputtime])} 
   {/loop}
{/pc}

单网页调用
{pc:get sql="select * from v9_page where catid=43"}
  {loop $data $v}
    {$v[title]}
  {/loop}
{/pc}

1、调用栏目图片：   
当前栏目id：{$catid}
当前栏目名：{$CATEGORYS[$catid][catname]}
当前栏目目录名：{$CATEGORYS[$catid][catdir]}   
当前栏目url：{$CATEGORYS[$catid][url]}
当前栏目描述：{$CATEGORYS[$catid][description]}
当前栏目图片：{$CATEGORYS[$catid][image]}    
当前栏目的内容数：{$CATEGORYS[$catid][items]}         
当前栏目的点击数：{$CATEGORYS[$catid][hits]}         
当前栏目的上级栏目id：{$CATEGORYS[$catid][parentid]}

2、父级栏目
父级栏目id：$CAT[parentid];
父级栏目的所有子栏目id：$CATEGORYS[$CAT[catid]][arrchildid];
其他字段：只需要改动XXX：{$CATEGORYS[$top_parentid][XXX]}

3. 父栏目名称、url链接、id等的调用代码标签：
父栏目名称：{$CATEGORYS[$CAT[parentid]][catname]}
父栏目url：{$CATEGORYS[$CAT[parentid]][url]}
父栏目id：{$CATEGORYS[$CAT[parentid]][catid]}
其他字段只需要改动xxx：{$CATEGORYS[$CAT[parentid]][xxx]}

4.获取一级栏目
获取一级栏目catid: {$top_parentid}
获取一级栏目名称：{$CATEGORYS[$top_parentid][catname]}
获取一级栏目url：{$CATEGORYS[$top_parentid][url]}

5. 顶级栏目名称、url链接、id等的调用代码标签：
顶级栏目名称：{$CATEGORYS[$top_parentid][catname]}
顶级栏目url：{$CATEGORYS[$top_parentid][url]}
顶级栏目id：{$CATEGORYS[$top_parentid][catid]}
其他字段只需要改动xxx：{$CATEGORYS[$top_parentid][xxx]}

我们来看一下这个函数,在PHPCMS中是这样进行定义的:
function str_cut($string, $length, $dot = '...')
调用：{str_cut($data, 50)}
str_cut与strip_tags搭配使用来去除HTML，实例代码如下:
{str_cut(strip_tags($v[description]),200)}

获取文章来源： {$copyfrom}
获取文章作者： {$username} 
获取文章发表时间：  {str_cut($inputtime,16,'')}
文章上一篇 下一篇
解析：
{$previous_page[url]} 上一篇文章链接
{$previous_page[title]} 上一篇文章标题
{$next_page[url]} 下一篇文章链接
{$next_page[title]} 下一篇文章标题
文章浏览量
方法一：
<script type="text/javascript" src="{JS_PATH}jquery.min.js"></script>
<script language="JavaScript" src="{APP_PATH}api.php?op=count&id={$id}&modelid={$modelid}"></script>
浏览量：<span id="hits"></span>
方法二： 推荐☆☆☆☆☆
<script type="text/javascript" src="{JS_PATH}jquery.min.js"></script>
<span>浏览量：<span id="hits"><script language="JavaScript" src="{APP_PATH}api.php?op=count&id={$id}&modelid={$modelid}"></script></span></span>

HTML 搜索表单提交
{$search_q}
phpcms v9搜索页、Tag页不能调用{$CATEGORYS[$catid][catname]}的解决方法
在调用之前加入：
 $CATEGORYS = getcache('category_content_1','commons');?>
原理：引用缓存
// 获取数据
{loop $datas $i $r}
    {if $r['thumb']}加载中...{/if}
{$r[title]}{if $r['posids']}加载中...{/if}
{$r[description]}
    发布时间：{format::date($r[inputtime], 1)}
{/loop}
{if empty($data)}未找到结果{/if}
{$pages}
/*  注意  */
前台获取搜索数据 获取到的数据前调用栏目标签会发生冲突
例：{pc:content action="lists" catid="10" num="3" order="id DESC limit 0,3--"}
  {loop $data $v}
     {$v[title]}
   {/loop}
{/pc}
哪么就需要修改models
路径 /htdocs/phpcms/modules/search/index.php
修改 init() 
$execute_time = execute_time();  //用时
$pages = isset($pages) ? $pages : ''; //分页
$totalnums = isset($totalnums) ? $totalnums : 0; //总条数
$data = isset($data) ? $data : ''; //获得结果集
 //获得结果集
把 $data = isset($data) ? $data : '';
改成 $datas = isset($data) ? $data : '';
前台使用 $datas遍历数据即可
phpcms搜索获取数据除了标题、简介、时间怎么获取其他字段
后台模型管理 字段管理 可以设置

文章排序
打开phpcms的文件结构图，找到【phpcms\modules\content】中的content.php文件，注意：最好不要用记事本打开，使用sublime或者其他软件打开。我使用的是sublime
代码太多了，使用快捷键【Ctrl+F】(这里是sublime软件的快捷键，其他软件不一定是这个哦)搜索【$datas = $this->db->listinfo($where,'id desc',$_GET['page']);】
找到这行代码后：直接修改成【$datas = $this->db->listinfo($where,'listorder ASC, id desc',$_GET['page']);】，你也可以先注释原代码在后面加上一行，像我这种做法，万一代码出现问题可以修改回来。
listinfo($where,'id desc',$_GET['page']);
注：原代码默认是使用ID倒序来排序的，
$datas = $this->db->listinfo($where,'listorder ASC, id desc',$_GET['page']);
修改后优先使用列表排序升序来排的
刷新后台界面，重新排序后，在前台查看效果

视频标签
模型管理 视频模型[修改] 字段修改
前台调用：
{pc:content action="lists" catid="$catid" num="6" moreinfo="1" order="listorder ASC" page="$page"}     
   {loop $data $v}
      {php $arr = string2array($v['video_upload']);}
   {/loop}
{/pc} 

phpcms 分页 调用标题、关键词、摘要、内容
{pc:content action="lists" catid="$catid" num="9" order="id DESC" page="$page"}
  {loop $data $v}
      {$v[title]}
      {$v[keywords]}
  {/loop}
{/pc}
<div id="pages" class="text-c">{$pages}</div>

phpcms 获取文章点击量
<script type="text/javascript" src="{JS_PATH}jquery.min.js"></script> 
阅读：
</span>
  <span id="hits">
    <script language="JavaScript" src="{APP_PATH}api.php?op=count&id={$id}&modelid={$modelid}"></script>
</span>

网站关于url长度问题报告
1、URL越短越好方便用户记忆 url太长，用户看着也不好
2、目录的层次尽量少 百度比较容易收录目录层次少的页面
3、网站url长度不会影响搜索引擎搜索  URL只要不超过1000个字母，都不会影响收录的
技术支持：
点击访问百度原文： https://zhidao.baidu.com/question/1821089038433066548.html
PHPCMS V9 URL去掉或修改/html路径的方法 官网原文： http://bbs.phpcms.cn/thread-233394-1-1.html
总结：
phpcms 网站url 完全可以实现用户自定义导航

phpcms在专题模块中无法调用$CATEGORYS变量
无法调用$CATEGORYS变量
在头部加入如下代码：
<?php if(!isset($CATEGORYS)) { $CATEGORYS =getcache('category_content_'.$siteid,'commons'); } ?>
经过测试，问题解决；

phpcms 添加内容 出现content_form.class.php on line 512解决方法
根据错误提示我们可以发现是由于content_form class php文件不完整导致的，网上有好多文章说是把这个文件用本地的替换掉就可 以了，但是只
根据错误提示我们可以发现是由于content_form.class.php文件不完整导致的，网上有好多文章说是把这个文件用本地的替换掉就可 以了，但是只要一更新缓存问题又会出现，不除根，果断废弃。
这个问题，一般用ftp上传文件时，文件代码丢失，使得代码不完整造成的，只要找到丢失文件，再上传就好了。
../phpcms/modules/content/fields/video/form.inc.php
就是由于这个文件不完整从而导致的错误，它才是真正的元凶。我们只要把这个文件替换掉就好了，如果用ftp上传建议大家采用“二进制”传输模式上传。

PHPCMS 根据标题搜索 自定义搜索功能
首页搜索模版里面写入：<!-- 搜索框开始 --><form name="search" type="get"> <input type="hidden" name="m" value="search"
首页搜索模版里面写入：
<!-- 搜索框开始 -->
<form name="search" type="get">    
    <input type="hidden" name="m" value="search"/>
    <input type="hidden" name="c" value="index"/>
    <input type="hidden" name="a" value="init"/>
    <input type="hidden" name="typeid" value="1"/>
    <input type="hidden" name="siteid" value="1"/>
    <input type="text" name="q" class="ipt" id="q" value="{$search_q}">
    <input type="submit" class="ss_btn" value="搜 索"></div>
</form>
<!-- 搜索框结束 -->
<!-- 获取数据 -->
<ul class="mainlist">
{pc:get sql="SELECT * FROM `v9_news` where title like '%$q%' order by id DESC " num="10" page="$page" return="data"}
           {if $data==""}
                    <p style="text-align:center; font-size:12px; ">没有找到和<font color="#FF0000;" style="text-decoration:underline; font-weight:bold; " >{$q}</font>相关的文章，请减短关键词或换个词组！</p>
            {/if}
            {loop $data $v} 
                       <li><a href="{$v['url']}"  style="color:#ea0525;" >{$v[title]}</a></li>
             {/loop}
          {/pc}
</ul>
<!-- 分页 -->
<div class='pagelist'>{$pages}</div>
<!-- 可自定义分页 详情见分页样式修改 -->
<div class='pagelist'>{$en_pages}</div>

phpcms 自定义带搜索条件的分页
后台代码public function init(){ 判断是否有搜索条件 $keyword = isset($_REQUEST[& 39;keyword& 39;]) ? $_REQUEST[& 39;k
后台代码
public function init()
{
    //判断是否有搜索条件
    $keyword = isset($_REQUEST['keyword']) ? $_REQUEST['keyword'] : '';
    //获取当前页
    $nowPage = isset($_GET['page']) ? $_GET['page'] : 1;
    $result = $this->db->en_listinfo("title like '%{$keyword}%'", 'id DESC', $nowPage, 12);
    include template('content','list');
}
前台调用
<?php 
foreach($result as $v) {
?>
    <tr>
        <td align="left"><?php echo $v['title']?></td>
    </tr>
<?php
}
?>
<div id="pages">
   <?php 
        $pages = $this->db->pages;
        echo '&nbsp;&nbsp;&nbsp;';
        echo $pages;
    ?>
</div>

phpcms 建中英文双语网站
第一步 网站先安装一个phpcms框架进行开发第二部 虚拟主机为例 在 www 下建 en 把项目复制一遍到 en 下 修改配置
第一步 网站先安装一个phpcms框架进行开发
第二部 虚拟主机为例 在/www/下建 en/
           把项目复制一遍到 en/下
           修改配置文件 en/   /caches/configs [database.php、system.php] 注意表前缀改成en
第三部 导出数据库 把表前缀都改成 en
           再次导入到原数据库 就可以了 此时数据库有两个数据库的表
前台访问 http://www.zhulupkowski.com/index.php     http://www.zhulupkowski.com/en/index.php
后台访问 http://www.zhulupkowski.com/admin.php   http://www.zhulupkowski.com/en/admin.php

PHPCMS V9 后台编辑器如何添加HTML/JS代码而不解析
PHPCMS V9后台编辑器添加HTML JS代码而不解析对于大部人来说是很鸡肋的东西，但对于技术分享的博客来说确是必不可少，PHPCMS后台编辑器输
PHPCMS V9后台编辑器添加HTML/JS代码而不解析对于大部人来说是很鸡肋的东西，但对于技术分享的博客来说确是必不可少，PHPCMS后台编辑器输入的时候是没有问题的，但是修改的时候HTML代码会被自动解析，做为一个技术员，发布文章后修改的概率太高了，所以有必要修复这问题
解决方法：
打开/phpcms/modules/content/content.php，把下面的内容删除掉
$data = array_map('htmlspecialchars_decode',$data);

phpcms 分页类样式修改的方法
分页类样式修改的方法网站添加英文版，但是语言包是中文的（语言包配置修改文件是：【caches】-》【configs】-》system php文件中的{& 39;l
分页类样式修改的方法
网站添加英文版，但是语言包是中文的（语言包配置修改文件是：【caches】-》【configs】-》system.php文件中的{'lang' => 'zh-cn',  //网站语言包}部分）
语言包的主要文件是【phpcms】-》【languages】-》【zh-cn】-》system.lang.php
修改如下：
$LANG['page_item'] = '条';
$LANG['previous'] = '上一页';
$LANG['next'] = '下一页';
$LANG['en_page_item'] = ' total';
$LANG['en_previous'] = 'previous';
$LANG['en_next'] = 'next';
把中文部分复制一份添加一个英文版
修改分页函数【phpcms】-》【libs】-》【functions】-》global.func.php里的pages()函数
复制一份修改成en_pages，如下所示
    function en_pages($num, $curr_page, $perpage = 20, $urlrule = '', $array = array(),$setpages = 10) {
	if(defined('URLRULE') && $urlrule == '') {
		$urlrule = URLRULE;
		$array = $GLOBALS['URL_ARRAY'];
	} elseif($urlrule == '') {
		$urlrule = url_par('page={$page}');
	}
	$multipage = '';
	if($num > $perpage) {
		$page = $setpages+1;
		$offset = ceil($setpages/2-1);
		$pages = ceil($num / $perpage);
		if (defined('IN_ADMIN') && !defined('PAGES')) define('PAGES', $pages);
		$from = $curr_page - $offset;
		$to = $curr_page + $offset;
		$more = 0;
		if($page >= $pages) {
			$from = 2;
			$to = $pages-1;
		} else {
			if($from <= 1) {
				$to = $page-1;
				$from = 2;
			}  elseif($to >= $pages) {
				$from = $pages-($page-2);
				$to = $pages-1;
			}
			$more = 1;
		}
		$multipage .= '<a href="'.pageurl($urlrule, 1, $array).'" class="bor">'.L('首页').'</a>';
		if($curr_page>0) {
			$multipage .= ' <a href="'.pageurl($urlrule, $curr_page-1, $array).'" class="bor">'.L('previous').'</a>';
			if($curr_page==1) {
				$multipage .= ' <span>1</span>';
			} elseif($curr_page>6 && $more) {
				$multipage .= ' <a href="'.pageurl($urlrule, 1, $array).'" class="one">1</a>..';
			} else {
				$multipage .= ' <a href="'.pageurl($urlrule, 1, $array).'" class="one">1</a>';
			}
		}
		for($i = $from; $i <= $to; $i++) {
			if($i != $curr_page) {
				$multipage .= ' <a href="'.pageurl($urlrule, $i, $array).'" class="one" >'.$i.'</a>';
			} else {
				$multipage .= ' <span>'.$i.'</span>';
			}
		}
		if($curr_page<$pages) {
			if($curr_page<$pages-5 && $more) {
				$multipage .= ' ..<a href="'.pageurl($urlrule, $pages, $array).'" class="one">'.$pages.'</a> <a href="'.pageurl($urlrule, $curr_page+1, $array).'" class="bor">'.L('next').'</a>';
			} else {
				$multipage .= ' <a href="'.pageurl($urlrule, $pages, $array).'" class="one">'.$pages.'</a> <a href="'.pageurl($urlrule, $curr_page+1, $array).'" class="bor">'.L('next').'</a>';
			}
		} elseif($curr_page==$pages) {
			$multipage .= ' <span>'.$pages.'</span> <a href="'.pageurl($urlrule, $curr_page, $array).'" class="bor">'.L('next').'</a>';
		} else {
			$multipage .= ' <a href="'.pageurl($urlrule, $pages, $array).'" class="one">'.$pages.'</a> <a href="'.pageurl($urlrule, $curr_page+1, $array).'" class="bor">'.L('next').'</a>';
		}
		$multipage .= '<a href="'.pageurl($urlrule, $pages, $array).'" class="bor">'.L('末页').'</a>';
		$multipage .= '<a class="solidbor">'.L('共').$pages.L('页').'</a>';
		$multipage .= '<a class="solidbor">'.$num.L('page_item').'</a>';
	}
	return $multipage;
}
然后修改【phpcms】-》【libs】-》【classes】-》template_cache.class.php
$str .= '$pages = pages($'.$op.'_total, $page, $pagesize, $urlrule);';
在这行的下面加上
$str .= '$en_pages = en_pages($'.$op.'_total, $page, $pagesize, $urlrule);';
$str .= '$r = $get_db->sql_query("'.$sql.'");$s = $get_db->fetch_next();$pages=pages($s[\'count\'], $page, $pagesize, $urlrule);';
在他下面增加：
$str .= '$r = $get_db->sql_query("'.$sql.'");$s = $get_db->fetch_next();$en_pages=en_pages($s[\'count\'], $page, $pagesize, $urlrule);';
最后在模板中直接用就可以了，如下
把  ：<div id="pages" class="text-c">{$pages}</div> 
改成：<div id="pages" class="text-c">{$en_pages}</div>

phpcms 表单向导 后台预览报错
表单向导添加的表单怎么不能预览和[访问前台]呀更新缓存就可以了
表单向导添加的表单怎么不能预览和[访问前台]呀
更新缓存就可以了

phpcms 表单向导HTML案例
表单向导HTML案例<form method="post" action="{APP_PATH}index php?m=formguide&c=index&a=show&formid=12&action=js&siteid=1">
表单向导HTML案例
<form method="post" action="{APP_PATH}index.php?m=formguide&c=index&a=show&formid=12&action=js&siteid=1">
      <input type="hidden" name="GuestBook_CateId" id="GuestBook_CateId" value="89" />
      <input type="hidden" name="successMessage" id="successMessage" value="感谢您的参与！" />
      <input type="hidden" name="successUrl" id="successUrl" value="/feedback_89_89.html" />
      <input type="hidden" name="errorMessage" id="errorMessage" value="对不起，提交失败，请重试！" />
      <input type="hidden" name="errorCodeMessage" id="errorCodeMessage" value="对不起，您输入的验证码值不对，请重试！" />
      
      <li class="land_xinxi_li"> <span class="inp_tit">联系人:</span>
        <input type="text" class="inp" placeholder="请输入您的姓名" name="info[name]" id="GuestBook_UserName"/>
        <div class="notice"> <span id="ReqUserName">*</span> </div>
      </li>
      <li class="land_xinxi_li"> <span class="inp_tit">电话：</span>
        <input type="number" class="inp" placeholder="请输入您的电话" name="info[phone]" id="GuestBook_UserTel" />
        <div class="notice"> <span id="ReqUserTel">*</span> </div>
      </li>
      <li class="land_xinxi_li">
        <input type="submit" name="dosubmit" class="btn_tj" id="dosubmit" value="提交"/>
      </li>
</form>
  
phpcms 表单向导--添加验证码
在phpcms表单向导模块中创建字段时没有验证码类型去选择，所以也就无法直接使用来加入验证码了。对模板程序稍微进行扩展开发即可实现。具体
在phpcms表单向导模块中创建字段时没有验证码类型去选择，所以也就无法直接使用来加入验证码了。
对模板程序稍微进行扩展开发即可实现。具体流程如下：
一、找到表单向导生成模板（一般默认为phpcms/templates/default/formguide/show_js.html）,在大约25行form表单中插入调用验证码的代码，如下：
<tr>
    <td><label for="code">验证码</label></td>
    <td>
    {php pc_base::load_sys_class('form', '', 0); }
    <input type="text" id="code" name="code" size="10">
    {form::checkcode('code_img', '4', '14', 100, 30)}
    </td>
</tr>
二、然后找到表单提交地址对应的方法（phpcms/modules/formguide/index.php里的show()方法），在其中加入验证验证码是否正确的程序即可。代码示例如下：
找到大约第51行，有一句：
if (isset($_POST['dosubmit'])) {
一定要在此句之后的if判断大括号中写：
//启动session
$session_storage = 'session_'.pc_base::load_config('system','session_storage');
pc_base::load_sys_class($session_storage);
//验证码
if (($_SESSION['code'] != strtolower($_POST['code'])) || empty($_SESSION['code'])) {
    showmessage("验证码错误");
} else {
    $_SESSION['code'] = '';
}
  
phpcms 前台判断用户是否登录
前台登录注册路径：{APP_PATH}}index php?m=member&c=index&a=login判断用户是否登录<?php $userid= param::get_cookie(&
前台登录注册
路径：{APP_PATH}}index.php?m=member&c=index&a=login
判断用户是否登录
<?php
        $userid= param::get_cookie('_userid');
?>
<!--然后再判断是否为空-->
{if $userid}   
       。。。这里写已经登录之后的代码。。。
{else}
       。。。这里写已经登录之后的代码。。。
{/if}
<!--获取用户名-->
<?php
$_username = param::get_cookie('_username');//当前登录人用户名
$_userid = param::get_cookie('_userid');//当然登录人id
?>
{$_userid}
{$_username}
  
phpcms 网站上线流程
v9两个数据库配置地方，一个是D: wamp www caches configs database php另一个是D: wamp www phpsso_server caches configs database php会
v9两个数据库配置地方，一个是D:\wamp\www\caches\configs\database.php
另一个是D:\wamp\www\phpsso_server\caches\configs\database.php
会员注册gong功能
很多人在网站搬迁的时候只修改了第一个数据库配置地方，把phpsso_server这里面的配置忘记修改了，所以会员没法注册登录，是不是很简单呀，解决搞定。
  
phpcms 面包屑导航 
当前栏目位置（面包屑导航）：{catpos($catid)}样式修改：phpcms -> libs -> function -> global func php找到函数catpos() 进行修改导航栏样式
当前栏目位置（面包屑导航）：{catpos($catid)}
样式修改：phpcms -> libs -> function -> global.func.php
找到函数catpos() 进行修改导航栏样式
  
phpcms 中调用某个栏目页面下的子栏目里面的所有文章并分页
{pc:content action="lists" catid="$catid" num="3" order="id DESC" page="$page"} {loop $data $v} <a href="">abc</a> {/loop} {/pc}
html页面调用： {$pages}
  
